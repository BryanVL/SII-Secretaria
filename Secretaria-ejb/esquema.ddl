CREATE TABLE ALUMNO (ID BIGINT NOT NULL, APELLIDO1 VARCHAR(20) NOT NULL, APELLIDO2 VARCHAR(20), CP INTEGER, DNI VARCHAR(10) NOT NULL UNIQUE, DIRECCION VARCHAR(50), EMAIL_INSTITUCIONAL VARCHAR(40) NOT NULL, EMAIL_PERSONAL VARCHAR(40), LOCALIDAD VARCHAR(40), MOVIL INTEGER, NOMBRE VARCHAR(15) NOT NULL, PROVINCIA VARCHAR(25), TELEFONO INTEGER, USUARIO VARCHAR(40), PRIMARY KEY (ID))
CREATE TABLE GRUPO (ID BIGINT NOT NULL, ASIGNAR BOOLEAN, CURSO INTEGER NOT NULL, INGLES VARCHAR(2) NOT NULL, LETRA VARCHAR(1) NOT NULL, PLAZAS INTEGER, PLAZASDISPONIBLES INTEGER, TURNO_MAÃ‘ANA_TARDE VARCHAR(6) NOT NULL, VISIBLE BOOLEAN, ID1_ID BIGINT, TITULACION_CODIGO INTEGER NOT NULL, PRIMARY KEY (ID))
CREATE TABLE ASIGNATURA (REFERENCIA INTEGER NOT NULL, CARACTER VARCHAR(10), CODIGO INTEGER NOT NULL, CREDITOS_TEORIA DOUBLE, CREDITOS_TOTAL DOUBLE NOT NULL, CURSO INTEGER, DURACION VARCHAR(20), NOMBRE VARCHAR(75) NOT NULL, OFERTADA VARCHAR(2) NOT NULL, UNIDAD_TEMPORAL VARCHAR(10), TITULACION_CODIGO INTEGER NOT NULL, PRIMARY KEY (REFERENCIA))
CREATE TABLE ASIGNATURAS_MATRICULA (ASIGNACIONAUTOMATICA BOOLEAN, ASIGNATURA_REFERENCIA INTEGER NOT NULL, CURSO_ACADEMICO VARCHAR(10) NOT NULL, EXPEDIENTE_NUM_EXPEDIENTE INTEGER NOT NULL, GRUPO_ID BIGINT, PRIMARY KEY (ASIGNATURA_REFERENCIA, CURSO_ACADEMICO, EXPEDIENTE_NUM_EXPEDIENTE))
CREATE TABLE CENTRO (ID BIGINT NOT NULL, DIRECCION VARCHAR(300) NOT NULL, NOMBRE VARCHAR(80) NOT NULL UNIQUE, TLF_CONSERJERIA INTEGER, PRIMARY KEY (ID))
CREATE TABLE ENCUESTA (FECHA_ENVIO DATE NOT NULL, ASIGNATURA_INGLES VARCHAR, EXPEDIENTE_NUM_EXPEDIENTE INTEGER NOT NULL, PRIMARY KEY (FECHA_ENVIO))
CREATE TABLE EXPEDIENTE (NUM_EXPEDIENTE INTEGER NOT NULL, ACTIVO BOOLEAN, CREDITOS_SUPERADOS DOUBLE, NOTA_MEDIA_PROVISIONAL DOUBLE, ALUMNO_ID BIGINT NOT NULL, TITULACION_CODIGO INTEGER NOT NULL, PRIMARY KEY (NUM_EXPEDIENTE))
CREATE TABLE GRUPOS_POR_ASIGNATURA (OFERTA VARCHAR(10), CURSO_ACADEMICO VARCHAR(9) NOT NULL, ASIGNATURA_REFERENCIA INTEGER NOT NULL, GRUPO_ID BIGINT NOT NULL, PRIMARY KEY (CURSO_ACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID))
CREATE TABLE IDIOMAS (NOMBRE VARCHAR(20) NOT NULL, PRIMARY KEY (NOMBRE))
CREATE TABLE MATRICULA (ESTADO VARCHAR(10) NOT NULL, FECHA_DE_MATRICULA DATE NOT NULL, LISTADO_ASIGNATURAS VARCHAR, NUEVO_INGRESO VARCHAR(2), NUM_ARCHIVO INTEGER, TURNO_PREFERENTE VARCHAR(6), CURSO_ACADEMICO VARCHAR(10) NOT NULL, EXPEDIENTE_NUM_EXPEDIENTE INTEGER NOT NULL, PRIMARY KEY (CURSO_ACADEMICO, EXPEDIENTE_NUM_EXPEDIENTE))
CREATE TABLE OPTATIVA (MENCION VARCHAR(30), PLAZAS INTEGER NOT NULL, ASIGNATURA_REFERENCIA INTEGER NOT NULL, PRIMARY KEY (ASIGNATURA_REFERENCIA))
CREATE TABLE TITULACION (CODIGO INTEGER NOT NULL, CREDITOS DOUBLE NOT NULL, NOMBRE VARCHAR(100) NOT NULL, PRIMARY KEY (CODIGO))
CREATE TABLE CLASE (HORA_FIN TIME, DIA DATE NOT NULL, HORA_INICIO TIME NOT NULL, GRUPO_ID BIGINT NOT NULL, ASIGNATURA_REFERENCIA INTEGER NOT NULL, PRIMARY KEY (DIA, HORA_INICIO, GRUPO_ID))
CREATE TABLE USUARIO (USUARIO VARCHAR(40) NOT NULL, PASSWORD VARCHAR(100) NOT NULL, ROL VARCHAR(20) NOT NULL, ALUMNO_ID BIGINT, PRIMARY KEY (USUARIO))
CREATE TABLE IDIOMAS_ASIGNATURA (asignaturas_REFERENCIA INTEGER NOT NULL, idiomas_NOMBRE VARCHAR(20) NOT NULL, PRIMARY KEY (asignaturas_REFERENCIA, idiomas_NOMBRE))
CREATE TABLE CENTRO_TITULACION (centros_ID BIGINT NOT NULL, titulaciones_CODIGO INTEGER NOT NULL, PRIMARY KEY (centros_ID, titulaciones_CODIGO))
CREATE TABLE GRUPOS_POR_ASIGNATURA_ENCUESTA (encuestas_FECHA_ENVIO DATE NOT NULL, CURSO_ACADEMICO VARCHAR(9) NOT NULL, ASIGNATURA_REFERENCIA INTEGER NOT NULL, GRUPO_ID BIGINT NOT NULL, PRIMARY KEY (encuestas_FECHA_ENVIO, CURSO_ACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID))
CREATE TABLE OPTATIVA_TITULACION (optativas_ASIGNATURA_REFERENCIA INTEGER NOT NULL, titulaciones_CODIGO INTEGER NOT NULL, PRIMARY KEY (optativas_ASIGNATURA_REFERENCIA, titulaciones_CODIGO))
ALTER TABLE GRUPO ADD CONSTRAINT UNQ_GRUPO_0 UNIQUE (Curso, Letra)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE GRUPO ADD CONSTRAINT FK_GRUPO_ID1_ID FOREIGN KEY (ID1_ID) REFERENCES GRUPO (ID)
ALTER TABLE ASIGNATURA ADD CONSTRAINT FK_ASIGNATURA_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE ASIGNATURAS_MATRICULA ADD CONSTRAINT FK_ASIGNATURAS_MATRICULA_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE ASIGNATURAS_MATRICULA ADD CONSTRAINT FK_ASIGNATURAS_MATRICULA_CURSO_ACADEMICO FOREIGN KEY (CURSO_ACADEMICO, EXPEDIENTE_NUM_EXPEDIENTE) REFERENCES MATRICULA (CURSO_ACADEMICO, EXPEDIENTE_NUM_EXPEDIENTE)
ALTER TABLE ASIGNATURAS_MATRICULA ADD CONSTRAINT FK_ASIGNATURAS_MATRICULA_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE ENCUESTA ADD CONSTRAINT FK_ENCUESTA_EXPEDIENTE_NUM_EXPEDIENTE FOREIGN KEY (EXPEDIENTE_NUM_EXPEDIENTE) REFERENCES EXPEDIENTE (NUM_EXPEDIENTE)
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_TITULACION_CODIGO FOREIGN KEY (TITULACION_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE EXPEDIENTE ADD CONSTRAINT FK_EXPEDIENTE_ALUMNO_ID FOREIGN KEY (ALUMNO_ID) REFERENCES ALUMNO (ID)
ALTER TABLE GRUPOS_POR_ASIGNATURA ADD CONSTRAINT FK_GRUPOS_POR_ASIGNATURA_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE GRUPOS_POR_ASIGNATURA ADD CONSTRAINT FK_GRUPOS_POR_ASIGNATURA_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE MATRICULA ADD CONSTRAINT FK_MATRICULA_EXPEDIENTE_NUM_EXPEDIENTE FOREIGN KEY (EXPEDIENTE_NUM_EXPEDIENTE) REFERENCES EXPEDIENTE (NUM_EXPEDIENTE)
ALTER TABLE OPTATIVA ADD CONSTRAINT FK_OPTATIVA_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE CLASE ADD CONSTRAINT FK_CLASE_GRUPO_ID FOREIGN KEY (GRUPO_ID) REFERENCES GRUPO (ID)
ALTER TABLE CLASE ADD CONSTRAINT FK_CLASE_ASIGNATURA_REFERENCIA FOREIGN KEY (ASIGNATURA_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE USUARIO ADD CONSTRAINT FK_USUARIO_ALUMNO_ID FOREIGN KEY (ALUMNO_ID) REFERENCES ALUMNO (ID)
ALTER TABLE IDIOMAS_ASIGNATURA ADD CONSTRAINT FK_IDIOMAS_ASIGNATURA_asignaturas_REFERENCIA FOREIGN KEY (asignaturas_REFERENCIA) REFERENCES ASIGNATURA (REFERENCIA)
ALTER TABLE IDIOMAS_ASIGNATURA ADD CONSTRAINT FK_IDIOMAS_ASIGNATURA_idiomas_NOMBRE FOREIGN KEY (idiomas_NOMBRE) REFERENCES IDIOMAS (NOMBRE)
ALTER TABLE CENTRO_TITULACION ADD CONSTRAINT FK_CENTRO_TITULACION_titulaciones_CODIGO FOREIGN KEY (titulaciones_CODIGO) REFERENCES TITULACION (CODIGO)
ALTER TABLE CENTRO_TITULACION ADD CONSTRAINT FK_CENTRO_TITULACION_centros_ID FOREIGN KEY (centros_ID) REFERENCES CENTRO (ID)
ALTER TABLE GRUPOS_POR_ASIGNATURA_ENCUESTA ADD CONSTRAINT GRUPOSPOR_ASIGNATURA_ENCUESTAencuestas_FECHA_ENVIO FOREIGN KEY (encuestas_FECHA_ENVIO) REFERENCES ENCUESTA (FECHA_ENVIO)
ALTER TABLE GRUPOS_POR_ASIGNATURA_ENCUESTA ADD CONSTRAINT FK_GRUPOS_POR_ASIGNATURA_ENCUESTA_CURSO_ACADEMICO FOREIGN KEY (CURSO_ACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID) REFERENCES GRUPOS_POR_ASIGNATURA (CURSO_ACADEMICO, ASIGNATURA_REFERENCIA, GRUPO_ID)
ALTER TABLE OPTATIVA_TITULACION ADD CONSTRAINT OPTATIVA_TITULACIONoptativas_ASIGNATURA_REFERENCIA FOREIGN KEY (optativas_ASIGNATURA_REFERENCIA) REFERENCES OPTATIVA (ASIGNATURA_REFERENCIA)
ALTER TABLE OPTATIVA_TITULACION ADD CONSTRAINT FK_OPTATIVA_TITULACION_titulaciones_CODIGO FOREIGN KEY (titulaciones_CODIGO) REFERENCES TITULACION (CODIGO)
CREATE TABLE SEQUENCE (SEQ_NAME VARCHAR(50) NOT NULL, SEQ_COUNT NUMERIC(38), PRIMARY KEY (SEQ_NAME))
INSERT INTO SEQUENCE(SEQ_NAME, SEQ_COUNT) values ('SEQ_GEN', 0)
