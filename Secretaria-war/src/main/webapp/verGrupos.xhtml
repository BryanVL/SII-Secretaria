<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://xmlns.jcp.org/jsf/passthrough">

<head>
	<title>SECRETARIA</title>
	<link rel="stylesheet" type="text/css" href="resources/StyleSheets.css"/>
</head>

<body>

	<div class="cabecera"> 
        <table>
            <tr>
                <td style="padding-left:100px"> <img class="img-uma" src=" https://www.uma.es/static/themes/uma2016/images/UMA_logo.png" width="25%"> </img> </td>    
                <td style="padding-right: 100px"> <span style="color:#00B1EC;"> WELCOME </span> 
                     <span style="color:#000000;"> TO </span> 
                     <span style="color:#8F0000;"> UMA </span> </td>
                <td style="padding-right:100px"> PÁGINA DE ASIGNACIÓN DE GRUPOS </td>
            </tr> 
        </table>
	</div>
	
	
	<div class="centrado">
		<h1>GRUPOS</h1>
		
		<h:form id="Grupos">
			<div class="wrapper">
				<table>
					<tr><td ><label>Titulacion</label><br/><h:inputText id="titulacion" value="#{grupo.codigotit}" class="inputTxt" p:placeholder="Introduce Titulacion" /></td>
						<td ><label>Curso</label><br/><h:inputText id="curso" value="#{grupo.curso}" class="inputTxt" p:placeholder="Introduce Curso" /></td>
						<td ><label>Letra</label><br/><h:inputText id="letra" value="#{grupo.letra}" class="inputTxt" p:placeholder="Introduce Letra" /></td></tr>
					<tr><td  class="padSuperior"><h:commandButton id="botonBuscarGrupo" action="#{grupo.buscarTrue()}" value="Buscar" class="centrado boton boton1"/></td>
						<td><h:button value="Ver todo" outcome="verGrupos.xhtml" class="centrado boton boton1"/></td>
						<td><h:button value="Volver atrás" outcome="DatosAdmin.xhtml" class="centrado boton boton1"/></td></tr>
				</table>
			</div>
			<div class="centrado ovf">
			<c:choose> 
            	<c:when test="#{grupo.buscar}">
            	<c:choose>
            		<c:when test="#{grupo.noseusa}">
	            		<h:dataTable value="#{grupo.buscarGrupo(grupo.curso,grupo.letra)}" var="g">
		            		
		            		<h:column>
								<f:facet name="header">Titulacion</f:facet>
								<h:outputText value="#{g.titulacion.codigo}" />
							</h:column>
	
							<h:column>
								<f:facet name="header">Curso</f:facet>
								<h:outputText value="#{g.curso}" />
							</h:column>
	
							<h:column>
								<f:facet name="header">Letra</f:facet>
								<h:outputText value="#{g.letra}" />
							</h:column>
					        
						</h:dataTable>
					</c:when>
					<c:otherwise>
						<h:dataTable value="#{grupo.buscarGrupo(grupo.codigotit,grupo.curso,grupo.letra)}" var="g">
		            		
		            		<h:column>
								<f:facet name="header">Titulacion</f:facet>
								<h:outputText value="#{g.titulacion.codigo}" />
							</h:column>
	
							<h:column>
								<f:facet name="header">Curso</f:facet>
								<h:outputText value="#{g.curso}" />
							</h:column>
	
							<h:column>
								<f:facet name="header">Letra</f:facet>
								<h:outputText value="#{g.letra}" />
							</h:column>
					        
						</h:dataTable>
					</c:otherwise>
				</c:choose>
            	</c:when>
            	<c:otherwise>
					<h:dataTable value="#{grupo.leerDatosAdmin()}" var="u">

						<h:column>
							<f:facet name="header">Titulacion</f:facet>
							<h:outputText value="#{u.titulacion.codigo}" />
						</h:column>

						<h:column>
							<f:facet name="header">Curso</f:facet>
							<h:outputText value="#{u.curso}" />
						</h:column>

						<h:column>
							<f:facet name="header">Letra</f:facet>
							<h:outputText value="#{u.letra}" />
						</h:column>

							<h:column>
								<f:facet name="header"></f:facet>
								<h:commandButton id="botonEliminarGrupo"
									action="#{grupo.borrarGrupo(u.titulacion.codigo,u.curso,u.letra)}"
									value="Eliminar Grupo" class="centrado boton boton1" />
							</h:column>

						

					</h:dataTable>
				</c:otherwise>
        </c:choose>
        </div>
        <div class="centrarTexto">
			<h:message for=""></h:message>
		</div>
		
		</h:form>
	</div>

	<div class="foot"> 
        <table>
            <tr><td>Universidad de Málaga · Avda. Cervantes, 2. 29071 MÁLAGA · Tel. 952 13 10 00 · info@uma.es</td></tr>
        </table>
	</div>
	
</body>
</html>
